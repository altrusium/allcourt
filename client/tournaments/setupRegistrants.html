<template name="setupRegistrants">
  {{> tabs}}
  {{setTab 'tournaments'}}
  <ul class="breadcrumb">
    <li><a href="/tournament/{{activeTournamentSlug}}">Details</a> <span class="divider">|</span></li>
    <li><a href="/tournament/{{activeTournamentSlug}}/roles">Roles</a> <span class="divider">|</span></li>
    <li><a href="/tournament/{{activeTournamentSlug}}/teams">Teams</a> <span class="divider">|</span></li>
    <li class="active">Registrants <span class="divider">|</span></li>
    <li><a href="/tournament/{{activeTournamentSlug}}/shifts">Volunteer Shifts</a></li>
  </ul>
  {{> userMessages}}
  <div class="row">
    <div class="span5">
      <h2 class="column-header"><small>Manage team registrants</small></h2>
      <form class="form-vertical">
        <div class="control-group">
          <label for="role" class="control-label">Role</label>
          <div class="controls">
            <select id="role">
              {{#each roles}}
              <option value="{{roleId}}">{{roleName}}</option>
              {{/each}}
            </select>
          </div>
        </div>
        <div class="control-group">
          <label for="team" class="control-label">Team</label>
          <div class="controls">
            <select id="team">
              {{#each teams}}
              <option value="{{teamId}}">{{teamName}}</option>
              {{/each}}
            </select>
          </div>
        </div>
        <div class="control-group">
          <label for="search" class="control-label">Register an existing user</label>
          <input id="search" type="text" placeholder="Partial name of user">
        </div>
        <div class="control-group">
          <label for="addUser" class="control-label">Looked and can't find them?</label>
          <a id="addNewUser" href="#">Add new user</a>
        </div>
      </form>
    </div>
    <div class="span6">
      {{#if searchResults}}
      <h2 class="column-header"><small>Possible user matches</small></h2>
      <table class="table table-hover table-striped">
        <thead>
          <tr>
            <th></th>
          </tr>
        </thead>
        <tbody>
          {{#each searchResults}}
          <tr>
            <td>{{fullName}}</td>
            <td>
              <a href="#" data-action="register" data-id="{{id}}">Register</a>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
      {{/if}}
      {{#if registrantsExist}}
      <h2 class="column-header"><small>Team: {{activeTeamName}}</small></h2>
      <table class="table table-hover table-striped">
        <thead>
          <tr>
            <th>User</th>
            <th>Team Lead</th>
            <th>Unregister</th>
          </tr>
        </thead>
        <tbody>
          {{#each registrants}}
          <tr>
            <td>{{fullName}}</td>
            <td>
              <input type="checkbox" class="checkbox" data-action="makeLead" data-user="{{id}}" {{teamLeadChecked}}>
            </td>
            <td>
              <a href="#" data-action="delete" data-user="{{id}}"><i class="icon-remove"></i></a>
            </td>
          </tr>
          {{/each}}
        </tbody>
      </table>
      {{/if}}
      {{#if addingNewUser}}
      <form class="form-horizontal">
        <div id="photoPlaceholder" class="female empty photo-placeholder">
          <img src="{{photoPath}}" id="photoImg">
        </div>
        <div class="control-group">
          <label class="control-label" for="photo">Photo</label>
          <div class="controls">
            <button id="pickPhoto" type="button" class="btn input-medium">Select File</button>
            <input type="hidden" id="photoFilename" value="{{photoFilename}}">
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="primaryEmail">Primary Email</label>
          <div class="controls">
            <input type="text" id="primaryEmail" value="{{primaryEmail}}" required>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="firstName">First Name</label>
          <div class="controls">
            <input type="text" id="firstName" class="input-medium" value="{{firstName}}" required>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="lastName">Last Name</label>
          <div class="controls">
            <input type="text" id="lastName" class="input-medium" value="{{lastName}}" required>
          </div>
        </div>
        <div class="control-group">
          <label class="control-label" for="gender">Gender</label>
          <div class="controls">
            <label class="radio inline">
              <input type="radio" id="maleGender" name="gender" value="male"> male
            </label>
            <label class="radio inline">
              <input type="radio" id="femaleGender" name="gender" value="female" checked> female
            </label>
          </div>
        </div>
        <div class="control-group">
          <div class="controls">
            <label class="checkbox">
              <input type="checkbox" id="hasProfileAccess" checked> Can manage their own profile
            </label>
          </div>
        </div>
        <div class="control-group">
          <div class="controls">
            <button type="button" id="addUser" class="btn btn-primary">Add User</button>
            &nbsp; <a href="#" id="cancelAddUser">cancel</a> 
          </div>
        </div>
      </form>
      {{/if}}
    </div>
  </div>
</template>

